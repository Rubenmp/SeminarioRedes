\section{Software}

EL Google Chromecast no es más que un dispositivo compatible con el protocolo propietario de Google Cast que actúa como receptor.
Este protocolo fue lanzado en julio de 2013 en exclusividad para las aplicaciones de YouTube, Google Play Music, Google Play Movies & TV y Netflix usando como receptor el Chromecast de primera generación, pero en febrero de 2014 pusieron el SDK a disposición de todos los desarrolladores para usarlo en sus propias aplicaciones.
En mayo de 2015 había más de 20.000 aplicaciones de terceros compatibles con esta tecnología según reconoce Google.

\

Para iniciar la reproducción de un contenido pulsamos el botón de \textit{cast}, que aparecerá automáticamente si Google Cast está integrado con la aplicación.
En ese momento aparecen los dispositivos Chromecast conectados a la red local y se elige aquel donde se quiere emitir el contenido.
Si el puerto HDMI dispone de Consumer Electronics Control (CEC) la televisión se encenderá inmediatamente.

\

Google Cast tiene dos modos de funcionamiento:

\begin{itemize}

	\item Uno es usar dispositivo desde el que solicitamos el streaming para controlar la reproducción (en adelante dispositivo emisor): pausar un vídeo, subir el volumen del audio, crear o modificar una cola de reproducción, etc.
	El dispositivo receptor (por ejemplo un Chromecast) es quien se encarga de descargarlo y comunicarse con el servidor de contenido, liberando al dispositivo emisor de esta tarea.
	Esto garantiza una carga de trabajo muy baja para el emisor y le permite estar bloqueado mientras la reproducción está teniendo lugar.
	El contenido puede estar almacenado localmente en el dispositivo emisor o en un servidor externo.
	El primer caso ocurre en aplicaciones como Google Photos, mientras que un ejemplo del segundo serían Netflix o YouTube.
	Las aplicaciones emisoras que usen este modo de funcionamiento deben ser compatible con Android 4.1, iOS 7.0 o versiones superiores si son aplicaciones móviles y con Windows 7, macOS 10.7, Chrome OS 28 o versiones superiores si son aplicaciones Chrome.
	En este último caso, se debe tener instalada la extensión Cast.

	\item El otro modo es hacer mirroring de una pestaña de Chrome o del escritorio de un ordenador con Chrome o del de un dispositivo con Android 4.4 o superior.
	La calidad del streaming en este caso varía ampliamente según la potencia de procesamiento del emisor.
	En el caso de hacerse desde un smartphone, la calidad de las imágenes normalmente se deteriora debido al escalado.

\end{itemize}

Hasta diciembre de 2014, el dispositivo emisor y receptor debían estar conectados a la misma red Wi-Fi para reproducir contenido, pero en las versiones posteriores a esa fecha ya no es necesario.
Esto se debe a que se ha añadido un modo invitado.
En este modo, el receptor emite ultrasonidos a través de los altavoces y el emisor es capaz de localizarlo usando el micrófono.
Se usa un PIN de cuatro dígitos que aparece en pantalla para la verificación.
El modo invitado está disponible para todos los Chromecast con un dispositivo Android como emisor y para los Chromecast a partir de la segunda generación para aquellos con dispositivos iOS como emisor.

\

Como hemos adelantado, la API de Google Cast implementa el paradigma del productor-consumidor. Para implementar el protocolo hacen falta dos aplicaciones:

\begin{itemize}

	\item La aplicación emisora que se encarga de proveer al usuario la capacidad de controlar la reproducción y elegir el dispositivo donde se emite el contenido.
	Esta aplicación crea un canal seguro con la aplicación receptura para el intercambio de mensajes.

	\item La aplicación receptora es una web app ejecutándose en una versión adaptada del navegador Chrome con una interfaz gráfica en CSS.
	La aplicación receptora puede tener una complejidad muy variable, pudiendo ir desde limitarse a reproducir contenido HTML5 hasta soportar protocolos de streaming como MPEG-DASH, HTTP Live Streaming o el Microsoft Smooth Streaming Protocol\cite{DLNA-Miracast}.

\end{itemize}

Los formatos multimedia a los que Google Cast da soporte son los siguientes:

\begin{itemize}

	\item Imágenes en formato BMP, GIF, JPEG, PNG y WEBP, con un límite de 1280x720 píxeles de resolución.

	\item Los codecs de audio HE-AAC, LC-AAC, MP3, Vorbis, WAV (LPCM) y FLAC. AC-3 (Dolby Digital) y E-AC-3 (EC-3, Dolby Digital Plus) están disponibles para passthrough de audio.

	\item Los codecs de vídeo H.264 High Profile Level 4.1 (decodificación hasta 720/60 o 1080/30) y VP8.

\end{itemize}

En el CES de 2015, Google anunció una expansión de Google Cast centrada en la reproducción de audio.
La idea era que los fabricantes de altavoces integraran la tecnología Google Cast sin necesidad de depender de un Chromecast.
Está disponible en varios modelos de LG y Sony.

\

En mayo de 2015, Google lanzó nuevas APIs dirigidas a poder el televisor como segunda pantalla que muestre un contenido distinto del de la aplicación emisora.
Esto, junto con las Game Manager APIs, permite, por ejemplo, usar varios dispostivos como mandos en una partida de un videojuego y una pantalla común que proyecte la partida.
Uno de esos dispositivos sería el que controlara el estado de la partida y se sincronizarían entre ellos intercambiando mensajes con un Chromecast u otro dispositivo receptor.

\begin{figure}[ht]
	\begin{minipage}[b]{0.55\linewidth}
	Utiliza un sistema operativo de escritorio llamado Chrome OS, siendo el navegador Google Chrome su principal herramienta de uso.
	Chrome OS se basa en el proyecto de código abierto Chromium OS,5 que, a diferencia de Chrome OS, se puede compilar a partir del código fuente descargado.
	\end{minipage}%%
	\begin{minipage}[b]{0.45\linewidth}
		\centering
		\includegraphics[width=.65\linewidth]{./Imagenes/googlecastbrowser.jpg}
	\end{minipage}
\end{figure}

\subsection{Protocolos de detección de dispositivos}

La primeras versiones del Chromecast usaban el protocolo DIAL para la detección de dispositivos receptores desde la aplicación emisora.
En las últimas versiones, se utiliza el protocolo mDNS para cuando los dispositivos se encuentran en la misma red local y un protocolo especial basado en ultrasonidos para el modo invitado.

\subsubsection{DIAL}
\input{./Temas/DIAL.tex}

\subsubsection{mDNS (multicast Domain Name System)}
\input{./Temas/mDNS.tex}

\subsubsection{Modo invitado}
\input{./Temas/modo_invitado.tex}

\subsection{Comparativa con otros protocolos multimedia}

\subsubsection{Miracast}
\input{./Temas/miracast.tex}

\subsection{Chrome OS?}
